{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/UNS/js/main.js","primo-explore/custom/UNS/js/prmBriefResultAfter/customDisplayExemplaire.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","app","angular","config","$sceDelegateProvider","urlWhitelist","resourceUrlWhitelist","push","constant","_koha_preprod","_testbiblibre_koha_api_public","_testbiblibre_koha_api_privee","_local_koha_primo_middleware","_test_koha_primo_middleware","controller","$scope","$http","$element","$sce","$templateCache","URLs","this","$onInit","url","$ctrl","parentCtrl","item","kohaDisplay","pnx","control","includes","headers","Content-Type","X-From-ExL-API-Gateway","undefined","method","then","response","items","data","home_library_id","location","callnumber","console","log","checked_out_date","availability","component","bindings","templateUrl"],"mappings":"AAAA,CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,GAAA,CAAAJ,EAAAG,GAAA,CAAA,GAAA,CAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,YAAA,OAAAC,SAAAA,QAAA,GAAA,CAAAF,GAAAC,EAAA,OAAAA,EAAAF,EAAA,CAAA,CAAA,EAAA,GAAAI,EAAA,OAAAA,EAAAJ,EAAA,CAAA,CAAA,EAAA,MAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,GAAA,GAAAO,KAAA,mBAAAF,CAAA,CAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,EAAA,EAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,CAAA,CAAA,EAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,CAAA,CAAA,CAAA,OAAAD,EAAAG,GAAAS,OAAA,CAAA,IAAA,IAAAL,EAAA,YAAA,OAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,CAAA,GAAAD,EAAAD,EAAAE,EAAA,EAAA,OAAAD,CAAA,EAAA,CAAAa,EAAA,CAAA,SAAAT,EAAAU,EAAAJ,G,aCAAN,EAAA,+CAAA,EAEQW,EAAMC,QAAQF,OAAO,aAAc,CAAC,cAAe,0BAA7C,EAUZC,EAAIE,OAAO,CAAC,uBAAwB,SAAUC,GAC1C,IAAIC,EAAeD,EAAqBE,qBAArB,EAEnBD,EAAaE,KAAK,mCAAoC,8BAA8B,8BAA8B,qCAAqC,6BAA6B,4BAA4B,iCAAiC,0BAA0B,2BAA3Q,EACAH,EAAqBE,qBAAqBD,CAA1C,CACD,EALH,EAuBIJ,EAAIO,SAAS,OAAQ,CACnBC,cAAe,GACfC,8BAA+B,2CAC/BC,8BAA+B,oCAC/BC,6BAA8B,+CAC9BC,4BAA6B,gDALV,CAArB,C,uFCnCNX,QAAQF,OAAO,0BAA2B,EAA1C,EAA8Cc,WAAW,oCAAqC,CAAC,SAAS,QAAS,WAAY,OAAQ,iBAAiB,OAAQ,SAAUC,EAAQC,EAAOC,EAAUC,EAAMC,EAAeC,GAClNC,KAAKC,QAAU,WACX,IAaYC,EAbRR,EAAOS,MAAMC,WAAWC,OACxBX,EAAOY,YAAc,CAAA,EACXZ,EAAOS,MAAMC,WAAWC,KAAKE,IAAIC,QAM5B,2BAGFC,SAAS,UAAlB,KAEIP,EAAMH,EAAKP,4BAJE,wBAKjBG,EAAM,CACFe,QAAW,CACPC,eAAgB,mBAChBC,yBAA0BC,KAAAA,CAFnB,EAIXC,OAAQ,MAERZ,IAAKA,CAPH,CAAN,EAQGa,KAAK,SAAUC,GACdtB,EAAOY,YAAc,CAAA,EACjBW,EAAQD,EAASE,KAAK,GAC1BxB,EAAOyB,gBAAkBF,EAAME,gBAC/BzB,EAAO0B,SAAWH,EAAMG,SACxB1B,EAAO2B,WAAaJ,EAAMI,WAC1BC,QAAQC,IAAI7B,EAAO2B,UAAnB,EAC8B,MAA1BJ,EAAMO,iBACN9B,EAAO+B,aAAe,eAGtB/B,EAAO+B,aAAe,YAE7B,CArBD,EAwBX,CACJ,EAzCD,EAyCIC,UAAU,sBAAuB,CAClCC,SAAU,CAACvB,WAAY,GAAb,EACTX,WAAY,oCACZmC,YAAa,0CAHoB,CAzCrC","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import {customDisplayExemplaire} from './prmBriefResultAfter/customDisplayExemplaire';\n\n    var app = angular.module('viewCustom', ['angularLoad', 'customDisplayExemplaire']);\n\n    /****************************************************************************************************/\n\n        /*In case of CENTRAL_PACKAGE - comment out the below line to replace the other module definition*/\n\n        /*var app = angular.module('centralCustom', ['angularLoad']);*/\n\n    /****************************************************************************************************/\n  //factory pour requête API\n  app.config(['$sceDelegateProvider', function ($sceDelegateProvider) {\n      var urlWhitelist = $sceDelegateProvider.resourceUrlWhitelist();\n      //urlWhitelist.push('http://catalogue.unice.fr:1701/primo_library/libweb/custom/getapiprimoforbdd','http://catalogue.unice.fr:1701/primo_library/libweb/custom/getbusgeoloc','https://api.archives-ouvertes.fr**','https://books.google.com**','http://books.google.com**','https://maps.google.com/maps**');\n      urlWhitelist.push('http://catalogue.unice.fr:1701**', 'http://catalogue.unice.fr**','https://demo.biblibre.com**','https://api.archives-ouvertes.fr**','https://books.google.com**','http://books.google.com**','https://bu.univ-cotedazur.fr**','http://localhost:8003**','http://dev-scd.unice.fr**');\n      $sceDelegateProvider.resourceUrlWhitelist(urlWhitelist);\n    }])\n\n   /* app.factory('getExternalHttpService', ['$http', function ($http) {\n        return {\n          getApiData: function getApiData(url) {\n            return $http({\n               \"headers\": {\n            'X-From-ExL-API-Gateway': undefined \n          },  \n             // jsonpCallbackParam: 'callback',\n            method: 'JSONP',\n              //method: 'GET',\n              url: url\n            });\n          }\n        };\n      }]);*/\n\n      app.constant('URLs', {\n        _koha_preprod: '',\n        _testbiblibre_koha_api_public: 'https://demo.biblibre.com/api/v1/public/',\n        _testbiblibre_koha_api_privee: 'https://demo.biblibre.com/api/v1/',\n        _local_koha_primo_middleware: 'http://localhost:5002/koha-primo-middleware/',\n        _test_koha_primo_middleware: 'http://dev-scd.unice.fr/koha-primo-middleware/',\n    });\n\n     /*if customDisplayExemplaire_without_module : \n       1. en-tête import {customDisplayExemplaireConfig} from './prmBriefResultAfter/customDisplayExemplaire';\n       2. enlever l'instanciation du module dans angular.module\n       3. ajouter app.component('prmBriefResultAfter', customDisplayExemplaireConfig);\n     */\n\n\n","angular.module('customDisplayExemplaire', []).controller('customDisplayExemplaireController', ['$scope','$http', '$element', '$sce', '$templateCache','URLs', function ($scope, $http, $element, $sce, $templateCache,URLs) {\r\n    this.$onInit = function() {\r\n        if ($scope.$ctrl.parentCtrl.item) {\r\n            $scope.kohaDisplay = false; \r\n            var obj = $scope.$ctrl.parentCtrl.item.pnx.control;\r\n            /*---Prod--------\r\n            var sourceid = obj.sourceid[0];\r\n            var sourcerecordid = obj.sourcerecordid[0]\r\n            ---------------*/\r\n            /*---Test---*/\r\n            var sourceid = \"sc_aleph__uns01000500488\"\r\n            var sourcerecordid = \"136\"\r\n            /*---End Test---*/\r\n            if (sourceid.includes(\"sc_aleph\")) {\r\n                //var url = URLs._testbiblibre_koha_api_public + \"biblios/\" + sourcerecordid.toString() +\"/items\";\r\n                var url = URLs._test_koha_primo_middleware + \"api/v1/koha_items/\" + sourcerecordid\r\n                $http({\r\n                    \"headers\": {\r\n                        'Content-Type': 'application/json',\r\n                        'X-From-ExL-API-Gateway': undefined\r\n                    },\r\n                    method: 'GET',\r\n                    //jsonpCallbackParam: 'callback',\r\n                    url: url\r\n                }).then(function (response) {\r\n                    $scope.kohaDisplay = false; \r\n                    var items = response.data[0];\r\n                    $scope.home_library_id = items.home_library_id;\r\n                    $scope.location = items.location;\r\n                    $scope.callnumber = items.callnumber;\r\n                    console.log($scope.callnumber)\r\n                    if (items.checked_out_date != null) {\r\n                        $scope.availability = \"Indisponible\"\r\n                    }\r\n                    else {\r\n                        $scope.availability = \"Disponible\"\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n}]).component('prmBriefResultAfter', {\r\n\t  bindings: {parentCtrl: '<'},\r\n    controller: 'customDisplayExemplaireController',\r\n    templateUrl: 'custom/UNS/html/prmBriefResultAfter.html'\r\n  });\r\n"]}